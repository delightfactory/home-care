import{c as A,r as n,j as e,X as I,L,U as q,V as u}from"./index-ea234c37.js";import{T as H}from"./workers-57d60f20.js";import{R as v,a as J}from"./routes-8a3e272c.js";import{M as T}from"./map-pin-8712ce19.js";import{C as F}from"./check-circle-6e435bc4.js";import{C as P}from"./calendar-0d424678.js";import{F as z}from"./file-text-61c3be99.js";import{S as B}from"./save-364108a6.js";import{P as $,T as K}from"./trash-2-1b0f85d5.js";import{D as Q}from"./DeleteConfirmModal-a9e4b9ca.js";import{C as W}from"./clock-726c4fbb.js";import{P as Y}from"./play-d145c3c0.js";import{C as ee}from"./check-dd756ef7.js";/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const se=A("ArrowDown",[["path",{d:"M12 5v14",key:"s699le"}],["path",{d:"m19 12-7 7-7-7",key:"1idqje"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const te=A("ArrowUp",[["path",{d:"m5 12 7-7 7 7",key:"hav0vg"}],["path",{d:"M12 19V5",key:"x0mq9r"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ae=A("ListTodo",[["rect",{x:"3",y:"5",width:"6",height:"6",rx:"1",key:"1defrl"}],["path",{d:"m3 17 2 2 4-4",key:"1jhpwq"}],["path",{d:"M13 6h8",key:"15sg57"}],["path",{d:"M13 12h8",key:"h98zly"}],["path",{d:"M13 18h8",key:"oe0vm4"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const re=A("Minus",[["path",{d:"M5 12h14",key:"1ays0h"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const le=A("Pencil",[["path",{d:"M17 3a2.85 2.83 0 1 1 4 4L7.5 20.5 2 22l1.5-5.5Z",key:"5qss01"}],["path",{d:"m15 5 4 4",key:"1mk7zo"}]]),ne=({open:x,onClose:w,mode:o,existingRoute:j,teams:S,onSaved:f})=>{var k;const[a,h]=n.useState({name:"",date:new Date().toISOString().substring(0,10),team_id:null,start_time:null,estimated_end_time:null,notes:""}),[b,N]=n.useState(!1),[g,M]=n.useState({}),_=r=>{M(d=>({...d,[r]:!0}))};n.useEffect(()=>{if(o==="edit"&&j){const{id:r,created_at:d,updated_at:C,...t}=j;h({...t})}else x&&h({name:"",date:new Date().toISOString().substring(0,10),team_id:null,start_time:"",estimated_end_time:"",notes:""})},[o,j,x]);const R=async r=>{var C;if(r.preventDefault(),!((C=a.name)!=null&&C.trim())){u.error("يرجى إدخال اسم خط السير");return}const d={...a};d.start_time||(d.start_time=null),d.estimated_end_time||(d.estimated_end_time=null),delete d.route_orders,delete d.orders,delete d.team,N(!0);try{if(o==="create"){const t=await v.createRoute(d);if(!t.success)throw new Error(t.error);u.success("تم إنشاء خط السير")}else if(j){const t=await v.updateRoute(j.id,d);if(!t.success)throw new Error(t.error);u.success("تم تحديث خط السير")}f(),w()}catch(t){u.error("حدث خطأ، حاول مرة أخرى"),console.error(t)}finally{N(!1)}};return x?e.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50 animate-fadeIn",children:e.jsxs("div",{className:"bg-white rounded-2xl shadow-2xl w-full max-w-lg animate-slideIn",children:[e.jsx("div",{className:"bg-gradient-to-r from-blue-600 to-purple-600 text-white p-6 rounded-t-2xl",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"flex items-center space-x-3",children:[e.jsx("div",{className:"bg-white bg-opacity-20 p-2 rounded-lg",children:e.jsx(T,{className:"h-6 w-6"})}),e.jsxs("div",{children:[e.jsx("h2",{className:"text-xl font-bold",children:o==="create"?"إنشاء خط سير جديد":"تعديل خط السير"}),e.jsx("p",{className:"text-blue-100 text-sm mt-1",children:o==="create"?"أضف خط سير جديد للنظام":"تحديث بيانات خط السير"})]})]}),e.jsx("button",{type:"button",className:"text-white hover:bg-white hover:bg-opacity-20 p-2 rounded-lg transition-all duration-200",onClick:w,disabled:b,children:e.jsx(I,{className:"h-5 w-5"})})]})}),e.jsx("div",{className:"p-6",children:b?e.jsx("div",{className:"py-8 flex justify-center",children:e.jsx(L,{size:"medium"})}):e.jsxs("form",{onSubmit:R,className:"space-y-6",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsxs("label",{className:"flex items-center label text-gray-700 font-medium",children:[e.jsx(T,{className:"h-4 w-4 ml-2 text-primary-500"}),"اسم خط السير *"]}),e.jsxs("div",{className:"relative",children:[e.jsx("input",{type:"text",className:`input transition-all duration-200 focus:ring-2 focus:ring-primary-500 focus:border-primary-500 hover:border-primary-300 pl-10 ${g.name&&a.name?"border-green-500 focus:ring-green-500":""}`,value:a.name||"",onChange:r=>h({...a,name:r.target.value}),onBlur:()=>_("name"),placeholder:"أدخل اسم خط السير",required:!0}),e.jsx("div",{className:"absolute left-3 top-1/2 transform -translate-y-1/2",children:g.name&&a.name?e.jsx(F,{className:"h-4 w-4 text-green-500"}):e.jsx(T,{className:"h-4 w-4 text-gray-400"})})]})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsxs("label",{className:"flex items-center label text-gray-700 font-medium",children:[e.jsx(P,{className:"h-4 w-4 ml-2 text-primary-500"}),"تاريخ خط السير"]}),e.jsxs("div",{className:"relative",children:[e.jsx("input",{type:"date",className:`input transition-all duration-200 focus:ring-2 focus:ring-primary-500 focus:border-primary-500 hover:border-primary-300 pl-10 ${g.date&&a.date?"border-green-500 focus:ring-green-500":""}`,value:a.date,onChange:r=>h({...a,date:r.target.value}),onBlur:()=>_("date")}),e.jsx("div",{className:"absolute left-3 top-1/2 transform -translate-y-1/2",children:g.date&&a.date?e.jsx(F,{className:"h-4 w-4 text-green-500"}):e.jsx(P,{className:"h-4 w-4 text-gray-400"})})]})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsxs("label",{className:"flex items-center label text-gray-700 font-medium",children:[e.jsx(q,{className:"h-4 w-4 ml-2 text-primary-500"}),"الفريق المسؤول"]}),e.jsxs("div",{className:"relative",children:[e.jsxs("select",{className:`input transition-all duration-200 focus:ring-2 focus:ring-primary-500 focus:border-primary-500 hover:border-primary-300 pl-10 ${g.team_id&&a.team_id?"border-green-500 focus:ring-green-500":""}`,value:a.team_id||"none",onChange:r=>h({...a,team_id:r.target.value==="none"?null:r.target.value}),onBlur:()=>_("team_id"),children:[e.jsx("option",{value:"none",children:"بدون فريق"}),S.map(r=>e.jsx("option",{value:r.id,children:r.name},r.id))]}),e.jsx("div",{className:"absolute left-3 top-1/2 transform -translate-y-1/2",children:g.team_id&&a.team_id?e.jsx(F,{className:"h-4 w-4 text-green-500"}):e.jsx(q,{className:"h-4 w-4 text-gray-400"})})]})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsxs("label",{className:"flex items-center label text-gray-700 font-medium",children:[e.jsx(z,{className:"h-4 w-4 ml-2 text-primary-500"}),"ملاحظات"]}),e.jsxs("div",{className:"relative",children:[e.jsx("textarea",{className:`input transition-all duration-200 focus:ring-2 focus:ring-primary-500 focus:border-primary-500 hover:border-primary-300 pl-10 h-24 ${g.notes&&a.notes?"border-green-500 focus:ring-green-500":""}`,value:a.notes||"",onChange:r=>h({...a,notes:r.target.value}),onBlur:()=>_("notes"),placeholder:"أدخل ملاحظات إضافية (اختياري)"}),e.jsx("div",{className:"absolute left-3 top-3",children:g.notes&&a.notes?e.jsx(F,{className:"h-4 w-4 text-green-500"}):e.jsx(z,{className:"h-4 w-4 text-gray-400"})})]}),a.notes&&e.jsxs("p",{className:"text-xs text-gray-500",children:[a.notes.length," حرف"]})]}),e.jsxs("div",{className:"flex justify-end space-x-3 pt-6 border-t border-gray-200",children:[e.jsxs("button",{type:"button",onClick:w,className:"btn-secondary flex items-center transition-all duration-200",disabled:b,children:[e.jsx(I,{className:"h-4 w-4 ml-2"}),"إلغاء"]}),e.jsxs("button",{type:"submit",disabled:b||!((k=a.name)!=null&&k.trim()),className:"btn-primary flex items-center transition-all duration-200 disabled:opacity-50 disabled:cursor-not-allowed",children:[b?e.jsx("div",{className:"animate-spin rounded-full h-4 w-4 border-b-2 border-white ml-2"}):e.jsx(B,{className:"h-4 w-4 ml-2"}),b?"جاري الحفظ...":o==="create"?"إنشاء":"تحديث"]})]})]})})]})}):null},ie=({open:x,onClose:w,route:o,onSaved:j})=>{var C;const[S,f]=n.useState([]),[a,h]=n.useState([]),[b,N]=n.useState(!1),[g,M]=n.useState(!1),_=((C=o.route_orders)==null?void 0:C.map(t=>t.order_id))||[];n.useEffect(()=>{if(!x)return;(async()=>{try{N(!0);const l=await v.getAvailableOrders(o.date),m=(o.route_orders||[]).sort((i,y)=>(i.sequence_order??0)-(y.sequence_order??0)).map(i=>i.order),p=l.filter(i=>!m.find(y=>y.id===i.id));h(m),f(p)}catch(l){u.error("تعذر تحميل الطلبات"),console.error(l)}finally{N(!1)}})()},[x,o]);const R=t=>{h([...a,t]),f(S.filter(l=>l.id!==t.id))},k=t=>{f([...S,t]),h(a.filter(l=>l.id!==t.id))},r=(t,l)=>{const m=[...a],p=l==="up"?t-1:t+1;if(p<0||p>=m.length)return;const i=m[t];m[t]=m[p],m[p]=i,h(m)},d=async()=>{M(!0);try{const t=a.map(i=>i.id),l=_.filter(i=>!t.includes(i)),m=t.filter(i=>!_.includes(i));await Promise.all(l.map(i=>v.removeOrderFromRoute(o.id,i))),await Promise.all(m.map(i=>{const y=t.indexOf(i)+1;return v.addOrderToRoute(o.id,i,y)}));const p=t.map((i,y)=>({order_id:i,sequence_order:y+1}));await v.reorderRouteOrders(o.id,p),u.success("تم حفظ الطلبات"),j(),w()}catch(t){u.error("حدث خطأ أثناء الحفظ"),console.error(t)}finally{M(!1)}};return x?e.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50 p-4",children:e.jsxs("div",{className:"bg-white w-full max-w-4xl rounded-lg p-6 overflow-y-auto max-h-[90vh]",children:[e.jsxs("div",{className:"flex items-center justify-between mb-4",children:[e.jsxs("h2",{className:"text-lg font-semibold",children:["إدارة طلبات خط السير: ",o.name]}),e.jsx("button",{className:"text-gray-400 hover:text-gray-600",onClick:w,disabled:g,children:e.jsx(I,{className:"h-5 w-5"})})]}),b?e.jsx("div",{className:"py-10 flex justify-center",children:e.jsx(L,{size:"large"})}):e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[e.jsxs("div",{children:[e.jsxs("h3",{className:"font-medium mb-2",children:["الطلبات المتاحة (",S.length,")"]}),e.jsxs("div",{className:"border rounded-lg p-2 h-96 overflow-y-auto",children:[S.map(t=>{var l;return e.jsxs("div",{className:"flex items-center justify-between p-2 border-b last:border-0",children:[e.jsxs("div",{children:[e.jsx("p",{className:"font-medium",children:((l=t.customer)==null?void 0:l.name)||t.id}),e.jsx("p",{className:"text-xs text-gray-500",children:t.scheduled_time})]}),e.jsx("button",{className:"btn-primary btn-sm",onClick:()=>R(t),children:e.jsx($,{className:"h-4 w-4"})})]},t.id)}),S.length===0&&e.jsx("p",{className:"text-center text-gray-500 mt-4",children:"لا توجد طلبات"})]})]}),e.jsxs("div",{children:[e.jsxs("h3",{className:"font-medium mb-2",children:["الطلبات في الخط (",a.length,")"]}),e.jsxs("div",{className:"border rounded-lg p-2 h-96 overflow-y-auto",children:[a.map((t,l)=>{var m;return e.jsxs("div",{className:"flex items-center justify-between p-2 border-b last:border-0",children:[e.jsxs("div",{children:[e.jsxs("p",{className:"font-medium",children:["#",l+1," - ",((m=t.customer)==null?void 0:m.name)||t.id]}),e.jsx("p",{className:"text-xs text-gray-500",children:t.scheduled_time})]}),e.jsxs("div",{className:"flex items-center gap-1",children:[e.jsx("button",{className:"p-1 hover:bg-gray-100 rounded",onClick:()=>r(l,"up"),disabled:l===0,children:e.jsx(te,{className:"h-4 w-4"})}),e.jsx("button",{className:"p-1 hover:bg-gray-100 rounded",onClick:()=>r(l,"down"),disabled:l===a.length-1,children:e.jsx(se,{className:"h-4 w-4"})}),e.jsx("button",{className:"btn-danger btn-sm",onClick:()=>k(t),children:e.jsx(re,{className:"h-4 w-4"})})]})]},t.id)}),a.length===0&&e.jsx("p",{className:"text-center text-gray-500 mt-4",children:"لا توجد طلبات مضافة"})]})]})]}),e.jsxs("div",{className:"flex justify-end gap-2 mt-6",children:[e.jsx("button",{className:"btn-secondary",onClick:w,disabled:g,children:"إلغاء"}),e.jsxs("button",{className:"btn-primary flex items-center gap-1",onClick:d,disabled:g,children:[e.jsx(B,{className:"h-4 w-4"})," حفظ"]})]})]})}):null},ye=()=>{const[x,w]=n.useState([]),[o,j]=n.useState(!0),S=new Date().toISOString().substring(0,10),[f,a]=n.useState(S),[h,b]=n.useState("all"),[N,g]=n.useState("all"),[M,_]=n.useState([]),[R,k]=n.useState(!1),[r,d]=n.useState(),[C,t]=n.useState("create"),[l,m]=n.useState(!1),[p,i]=n.useState(),[y,E]=n.useState(!1),U=async()=>{try{const s=await H.getTeams();_(s)}catch{u.error("تعذر تحميل الفرق")}},O=async()=>{try{j(!0);const s={};f&&(s.date=f),N!=="all"&&(s.team_id=N),h!=="all"&&(s.status=[h]);const c=await v.getRoutes(s);w(c.data)}catch(s){u.error("تعذر تحميل خطوط السير"),console.error(s)}finally{j(!1)}};if(n.useEffect(()=>{U()},[]),n.useEffect(()=>{O()},[f,N,h]),o)return e.jsx("div",{className:"flex items-center justify-center h-64",children:e.jsx(L,{size:"large",text:"جاري تحميل خطوط السير..."})});const V=async s=>{try{const c=await v.startRoute(s.id);if(!c.success)throw new Error(c.error);u.success("تم بدء خط السير"),O()}catch(c){u.error("تعذر بدء خط السير"),console.error(c)}},X=async s=>{try{const c=await v.completeRoute(s.id);if(!c.success)throw new Error(c.error);u.success("تم إكمال خط السير"),O()}catch(c){u.error("تعذر إكمال خط السير"),console.error(c)}},Z=async s=>{try{const c=await v.deleteRoute(s.id);if(!c.success)throw new Error(c.error);u.success("تم حذف خط السير"),E(!1),O()}catch(c){u.error("تعذر حذف خط السير"),console.error(c)}},G=s=>{const c={planned:"badge-gray",in_progress:"badge-blue",completed:"badge-green"},D={planned:"مخطط",in_progress:"جارٍ التنفيذ",completed:"مكتمل"};return e.jsx("span",{className:`badge ${c[s]??"badge-gray"}`,children:D[s]??s})};return e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:"flex justify-between items-center",children:[e.jsxs("div",{children:[e.jsx("h1",{className:"text-3xl font-bold bg-gradient-to-r from-primary-600 to-primary-800 bg-clip-text text-transparent",children:"إدارة خطوط السير"}),e.jsx("p",{className:"text-gray-600 mt-2",children:"تخطيط وتتبع خطوط سير الفرق"})]}),e.jsxs("button",{className:"btn-primary hover:scale-105 transition-all duration-200 shadow-lg hover:shadow-xl",onClick:()=>{d(void 0),t("create"),k(!0)},children:[e.jsx($,{className:"h-5 w-5 ml-2"})," إنشاء خط سير"]})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-4 gap-4",children:[e.jsx("div",{className:"card-compact bg-gradient-to-br from-blue-50 to-blue-100 border-blue-200",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-sm font-medium text-blue-600",children:"إجمالي المسارات"}),e.jsx("p",{className:"text-2xl font-bold text-blue-800",children:x.length})]}),e.jsx("div",{className:"p-3 bg-blue-500 rounded-lg",children:e.jsx(J,{className:"h-6 w-6 text-white"})})]})}),e.jsx("div",{className:"card-compact bg-gradient-to-br from-gray-50 to-gray-100 border-gray-200",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-sm font-medium text-gray-600",children:"مخططة"}),e.jsx("p",{className:"text-2xl font-bold text-gray-800",children:x.filter(s=>s.status==="planned").length})]}),e.jsx("div",{className:"p-3 bg-gray-500 rounded-lg",children:e.jsx(P,{className:"h-6 w-6 text-white"})})]})}),e.jsx("div",{className:`card-compact bg-gradient-to-br from-yellow-50 to-yellow-100 border-yellow-200 ${x.filter(s=>s.status==="in_progress").length>0?"animate-pulse":""}`,children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-sm font-medium text-yellow-600",children:"قيد التنفيذ"}),e.jsx("p",{className:"text-2xl font-bold text-yellow-800",children:x.filter(s=>s.status==="in_progress").length})]}),e.jsx("div",{className:"p-3 bg-yellow-500 rounded-lg",children:e.jsx(W,{className:"h-6 w-6 text-white"})})]})}),e.jsx("div",{className:"card-compact bg-gradient-to-br from-green-50 to-green-100 border-green-200",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-sm font-medium text-green-600",children:"مكتملة"}),e.jsx("p",{className:"text-2xl font-bold text-green-800",children:x.filter(s=>s.status==="completed").length})]}),e.jsx("div",{className:"p-3 bg-green-500 rounded-lg",children:e.jsx(F,{className:"h-6 w-6 text-white"})})]})})]}),e.jsxs("div",{className:"card-compact space-y-4 md:space-y-0 md:flex md:items-center md:gap-4",children:[e.jsxs("div",{className:"flex items-center gap-2 w-full md:w-auto",children:[e.jsx(P,{className:"h-5 w-5 text-gray-400"}),e.jsx("input",{type:"date",className:"input focus:ring-2 focus:ring-primary-500 focus:border-primary-500 transition-all duration-200",value:f,onChange:s=>a(s.target.value)})]}),e.jsxs("div",{className:"flex items-center gap-2 w-full md:w-60",children:[e.jsx(q,{className:"h-5 w-5 text-gray-400"}),e.jsxs("select",{className:"select w-full focus:ring-2 focus:ring-primary-500 focus:border-primary-500 transition-all duration-200",value:N,onChange:s=>g(s.target.value),children:[e.jsx("option",{value:"all",children:"كل الفرق"}),M.map(s=>e.jsx("option",{value:s.id,children:s.name},s.id))]})]}),e.jsxs("div",{className:"flex items-center gap-2 w-full md:w-52",children:[e.jsx(T,{className:"h-5 w-5 text-gray-400"}),e.jsxs("select",{className:"select w-full focus:ring-2 focus:ring-primary-500 focus:border-primary-500 transition-all duration-200",value:h,onChange:s=>b(s.target.value),children:[e.jsx("option",{value:"all",children:"كل الحالات"}),e.jsx("option",{value:"planned",children:"مخطط"}),e.jsx("option",{value:"in_progress",children:"جارٍ التنفيذ"}),e.jsx("option",{value:"completed",children:"مكتمل"})]})]})]}),e.jsx("div",{className:"card-elevated overflow-x-auto",children:e.jsxs("table",{className:"table",children:[e.jsx("thead",{className:"table-header",children:e.jsxs("tr",{children:[e.jsx("th",{className:"table-header-cell",children:"الاسم"}),e.jsx("th",{className:"table-header-cell",children:"التاريخ"}),e.jsx("th",{className:"table-header-cell",children:"الفريق"}),e.jsx("th",{className:"table-header-cell",children:"الحالة"}),e.jsx("th",{className:"table-header-cell",children:"عدد الطلبات"}),e.jsx("th",{className:"table-header-cell",children:"إجراءات"})]})}),e.jsxs("tbody",{className:"table-body",children:[x.map(s=>{var c,D;return e.jsxs("tr",{className:"table-row",children:[e.jsx("td",{className:"table-cell font-medium",children:s.name}),e.jsx("td",{className:"table-cell",children:s.date}),e.jsx("td",{className:"table-cell",children:((c=s.team)==null?void 0:c.name)||"-"}),e.jsx("td",{className:"table-cell",children:G(s.status)}),e.jsx("td",{className:"table-cell",children:((D=s.route_orders)==null?void 0:D.length)||0}),e.jsxs("td",{className:"table-cell space-x-1 space-x-reverse whitespace-nowrap",children:[e.jsx("button",{className:"p-2 text-blue-600 hover:bg-blue-50 rounded-lg transition-all duration-200 hover:scale-110 shadow-sm hover:shadow-md",title:"تعديل",onClick:()=>{d(s),t("edit"),k(!0)},children:e.jsx(le,{className:"h-4 w-4"})}),e.jsx("button",{className:"p-2 text-amber-600 hover:bg-amber-50 rounded-lg transition-all duration-200 hover:scale-110 shadow-sm hover:shadow-md",title:"إدارة الطلبات",onClick:()=>{i(s),m(!0)},children:e.jsx(ae,{className:"h-4 w-4"})}),s.status==="planned"&&e.jsx("button",{className:"p-2 text-green-600 hover:bg-green-50 rounded-lg transition-all duration-200 hover:scale-110 shadow-sm hover:shadow-md",title:"بدء الخط",onClick:()=>V(s),children:e.jsx(Y,{className:"h-4 w-4"})}),s.status==="in_progress"&&e.jsx("button",{className:"p-2 text-green-700 hover:bg-green-50 rounded-lg transition-all duration-200 hover:scale-110 shadow-sm hover:shadow-md",title:"إكمال الخط",onClick:()=>X(s),children:e.jsx(ee,{className:"h-4 w-4"})}),s.status==="planned"&&e.jsx("button",{className:"p-2 text-red-600 hover:bg-red-50 rounded-lg transition-all duration-200 hover:scale-110 shadow-sm hover:shadow-md",title:"حذف",onClick:()=>{d(s),E(!0)},children:e.jsx(K,{className:"h-4 w-4"})})]})]},s.id)}),x.length===0&&e.jsx("tr",{children:e.jsx("td",{colSpan:6,className:"table-cell text-center py-8",children:e.jsx("p",{className:"text-gray-500",children:"لا توجد بيانات مطابقة"})})})]})]})}),R&&e.jsx(ne,{mode:C,open:R,onClose:()=>k(!1),existingRoute:r,onSaved:O,teams:M}),l&&p&&e.jsx(ie,{open:l,onClose:()=>m(!1),route:p,onSaved:O}),y&&r&&e.jsx(Q,{isOpen:y,onClose:()=>E(!1),onConfirm:()=>Z(r),title:"تأكيد الحذف",message:"هل أنت متأكد من حذف خط السير؟",itemName:r.name})]})};export{ye as default};
