import{c as k,r as n,V as C,j as e,L as S,U as h,S as B,s as D}from"./index-ea234c37.js";import{u as p}from"./useQuery-c20e633a.js";import{C as f}from"./calendar-0d424678.js";import{C as i}from"./clock-726c4fbb.js";import{C as y}from"./check-circle-6e435bc4.js";import{D as v}from"./dollar-sign-6405c3b9.js";import{T as j}from"./trending-up-4ad129ba.js";import{R as N}from"./reports-fb1a87f3.js";/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const d=k("AlertCircle",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["line",{x1:"12",x2:"12",y1:"8",y2:"12",key:"1pkeuh"}],["line",{x1:"12",x2:"12.01",y1:"16",y2:"16",key:"4dfq90"}]]),G=()=>new Date().toISOString().split("T")[0],U=()=>{var g,x,b,u;const s=n.useMemo(()=>G(),[]),{data:r,isLoading:w,error:c}=p(["dashboard",s],async()=>{let a=await N.getDailyDashboard(s);if(!a){const t=await N.getDashboardStats();a={report_date:s,total_orders:t.today_orders,completed_orders:t.today_orders-t.pending_orders,cancelled_orders:0,total_revenue:t.total_revenue,total_expenses:t.total_expenses,net_profit:t.net_profit,active_teams:t.active_teams,average_rating:t.average_rating}}return a},{staleTime:1e3*60*5}),{data:l=0,error:m}=p(["activeRoutes",s],async()=>{const{data:a}=await D.from("routes").select("id",{count:"exact",head:!0}).eq("date",s).eq("status","in_progress");return(a==null?void 0:a.length)||0},{staleTime:1e3*60}),o=n.useMemo(()=>r?r.total_orders-r.completed_orders-r.cancelled_orders:0,[r]);if(n.useEffect(()=>{(c||m)&&C.error("حدث خطأ في تحميل إحصائيات لوحة التحكم")},[c,m]),w)return e.jsx("div",{className:"flex items-center justify-center h-64",children:e.jsx(S,{size:"large",text:"جاري تحميل لوحة التحكم..."})});const _=[{name:"طلبات اليوم",value:(r==null?void 0:r.total_orders)||0,icon:f,color:"text-blue-600",bgGradient:"bg-gradient-to-br from-blue-50 to-blue-100",iconBg:"bg-gradient-to-br from-blue-500 to-blue-600"},{name:"الطلبات المعلقة",value:o||0,icon:i,color:"text-yellow-600",bgGradient:"bg-gradient-to-br from-yellow-50 to-yellow-100",iconBg:"bg-gradient-to-br from-yellow-500 to-yellow-600",pulse:o>0},{name:"الخطوط النشطة",value:l||0,icon:y,color:"text-green-600",bgGradient:"bg-gradient-to-br from-green-50 to-green-100",iconBg:"bg-gradient-to-br from-green-500 to-green-600",pulse:l>0},{name:"الفرق النشطة",value:(r==null?void 0:r.active_teams)||0,icon:h,color:"text-purple-600",bgGradient:"bg-gradient-to-br from-purple-50 to-purple-100",iconBg:"bg-gradient-to-br from-purple-500 to-purple-600"},{name:"إجمالي الإيرادات",value:`${((g=r==null?void 0:r.total_revenue)==null?void 0:g.toLocaleString())||0} ج.م`,icon:v,color:"text-emerald-600",bgGradient:"bg-gradient-to-br from-emerald-50 to-emerald-100",iconBg:"bg-gradient-to-br from-emerald-500 to-emerald-600"},{name:"إجمالي المصروفات",value:`${((x=r==null?void 0:r.total_expenses)==null?void 0:x.toLocaleString())||0} ج.م`,icon:j,color:"text-red-600",bgGradient:"bg-gradient-to-br from-red-50 to-red-100",iconBg:"bg-gradient-to-br from-red-500 to-red-600"},{name:"صافي الربح",value:`${((b=r==null?void 0:r.net_profit)==null?void 0:b.toLocaleString())||0} ج.م`,icon:v,color:r&&r.net_profit>=0?"text-green-600":"text-red-600",bgGradient:r&&r.net_profit>=0?"bg-gradient-to-br from-green-50 to-green-100":"bg-gradient-to-br from-red-50 to-red-100",iconBg:r&&r.net_profit>=0?"bg-gradient-to-br from-green-500 to-green-600":"bg-gradient-to-br from-red-500 to-red-600"},{name:"متوسط التقييم",value:((u=r==null?void 0:r.average_rating)==null?void 0:u.toFixed(1))||"0.0",icon:d,color:"text-orange-600",bgGradient:"bg-gradient-to-br from-orange-50 to-orange-100",iconBg:"bg-gradient-to-br from-orange-500 to-orange-600"}];return e.jsxs("div",{className:"space-y-8",children:[e.jsxs("div",{className:"bg-gradient-to-r from-primary-50 to-primary-100 rounded-xl p-6 border border-primary-200",children:[e.jsx("h1",{className:"text-3xl font-bold bg-gradient-to-r from-primary-700 to-primary-900 bg-clip-text text-transparent",children:"لوحة التحكم"}),e.jsxs("p",{className:"text-gray-600 mt-2 text-lg",children:["نظرة عامة على أداء الشركة اليوم - ",new Date().toLocaleDateString("ar-AE")]})]}),e.jsx("div",{className:"grid grid-cols-1 gap-6 sm:grid-cols-2 lg:grid-cols-4",children:_.map((a,t)=>e.jsx("div",{className:`card-compact group hover:scale-105 transition-all duration-300 ${a.bgGradient} border-0 shadow-lg hover:shadow-xl ${a.pulse?"animate-pulse":""}`,style:{animationDelay:`${t*100}ms`},children:e.jsxs("div",{className:"flex items-center",children:[e.jsx("div",{className:"flex-shrink-0",children:e.jsx("div",{className:`p-4 rounded-xl ${a.iconBg} group-hover:scale-110 transition-transform duration-300 shadow-lg`,children:e.jsx(a.icon,{className:"h-7 w-7 text-white"})})}),e.jsxs("div",{className:"mr-4 flex-1",children:[e.jsx("p",{className:"text-sm font-semibold text-gray-700 mb-1",children:a.name}),e.jsx("p",{className:"text-2xl font-bold text-gray-900 group-hover:text-primary-700 transition-colors duration-300",children:a.value})]})]})},a.name))}),e.jsxs("div",{className:"grid grid-cols-1 gap-6 lg:grid-cols-2",children:[e.jsxs("div",{className:"card-elevated bg-gradient-to-br from-blue-50 to-indigo-50 border-blue-200",children:[e.jsx("div",{className:"card-header border-b border-blue-200",children:e.jsxs("h3",{className:"card-title text-blue-900 flex items-center",children:[e.jsx(j,{className:"h-5 w-5 ml-2"}),"إجراءات سريعة"]})}),e.jsxs("div",{className:"space-y-3",children:[e.jsxs("button",{className:"btn-primary w-full justify-start hover:scale-105 transition-all duration-300 shadow-md hover:shadow-lg",children:[e.jsx(B,{className:"h-5 w-5 ml-2"}),"إضافة طلب جديد"]}),e.jsxs("button",{className:"btn-secondary w-full justify-start hover:scale-105 transition-all duration-300 shadow-md hover:shadow-lg",children:[e.jsx(h,{className:"h-5 w-5 ml-2"}),"إضافة عميل جديد"]}),e.jsxs("button",{className:"btn-secondary w-full justify-start hover:scale-105 transition-all duration-300 shadow-md hover:shadow-lg",children:[e.jsx(f,{className:"h-5 w-5 ml-2"}),"عرض جدول اليوم"]})]})]}),e.jsxs("div",{className:"card-elevated bg-gradient-to-br from-amber-50 to-orange-50 border-amber-200",children:[e.jsx("div",{className:"card-header border-b border-amber-200",children:e.jsxs("h3",{className:"card-title text-amber-900 flex items-center",children:[e.jsx(d,{className:"h-5 w-5 ml-2"}),"تنبيهات مهمة"]})}),e.jsxs("div",{className:"space-y-3",children:[o>0&&e.jsxs("div",{className:"flex items-center p-4 bg-gradient-to-r from-yellow-100 to-yellow-200 rounded-xl border border-yellow-300 shadow-sm animate-pulse",children:[e.jsx(d,{className:"h-6 w-6 text-yellow-700 ml-3 flex-shrink-0"}),e.jsxs("span",{className:"text-sm font-medium text-yellow-800",children:["يوجد ",o," طلب معلق يحتاج إلى معالجة"]})]}),l===0&&e.jsxs("div",{className:"flex items-center p-4 bg-gradient-to-r from-blue-100 to-blue-200 rounded-xl border border-blue-300 shadow-sm",children:[e.jsx(i,{className:"h-6 w-6 text-blue-700 ml-3 flex-shrink-0"}),e.jsx("span",{className:"text-sm font-medium text-blue-800",children:"لا توجد خطوط سير نشطة اليوم"})]}),o===0&&l>0&&e.jsxs("div",{className:"flex items-center p-4 bg-gradient-to-r from-green-100 to-green-200 rounded-xl border border-green-300 shadow-sm",children:[e.jsx(y,{className:"h-6 w-6 text-green-700 ml-3 flex-shrink-0"}),e.jsx("span",{className:"text-sm font-medium text-green-800",children:"جميع العمليات تسير بشكل طبيعي"})]}),o===0&&l===0&&e.jsxs("div",{className:"flex items-center p-4 bg-gradient-to-r from-gray-100 to-gray-200 rounded-xl border border-gray-300 shadow-sm",children:[e.jsx(i,{className:"h-6 w-6 text-gray-700 ml-3 flex-shrink-0"}),e.jsx("span",{className:"text-sm font-medium text-gray-800",children:"لا توجد أنشطة اليوم"})]})]})]})]})]})};export{U as default};
