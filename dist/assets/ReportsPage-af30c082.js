import{c as I,r as c,V as L,j as e,L as O,U as p,B as d}from"./index-ea234c37.js";import{R as o}from"./reports-fb1a87f3.js";import{C as F}from"./calendar-0d424678.js";import{T as N}from"./target-ac8a6e67.js";import{T as m}from"./trending-up-4ad129ba.js";import{D as u}from"./dollar-sign-6405c3b9.js";/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Y=I("Download",[["path",{d:"M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4",key:"ih7n3h"}],["polyline",{points:"7 10 12 15 17 10",key:"2ggqvy"}],["line",{x1:"12",x2:"12",y1:"15",y2:"3",key:"1vk2je"}]]),B=()=>{const[f,b]=c.useState(null),[x,v]=c.useState([]),[w,y]=c.useState([]),[_,h]=c.useState(!0),[i,D]=c.useState(new Date().toISOString().split("T")[0]);c.useEffect(()=>{S()},[i]);const S=async()=>{try{h(!0);const t=new Date(new Date(i).getFullYear(),new Date(i).getMonth(),1).toISOString().split("T")[0],M=new Date(new Date(i).getFullYear(),new Date(i).getMonth()+1,0).toISOString().split("T")[0],[R,n,T]=await Promise.all([o.getDailyDashboard(i),o.getDailyReports(t,M),o.getTeamSummaries()]);b(R),v(T);const k={id:"mock-"+new Date().getTime(),month:new Date(i).getMonth()+1,year:new Date(i).getFullYear(),total_orders:n.reduce((l,r)=>l+r.total_orders,0),completed_orders:n.reduce((l,r)=>l+r.completed_orders,0),total_revenue:n.reduce((l,r)=>l+r.total_revenue,0),total_expenses:n.reduce((l,r)=>l+r.total_expenses,0),net_profit:n.reduce((l,r)=>l+r.net_profit,0),avg_orders_per_team:n.length>0?n.reduce((l,r)=>l+r.total_orders,0)/n.length:0,avg_rating:n.length>0?n.reduce((l,r)=>l+r.average_rating,0)/n.length:0,new_customers:0,created_at:new Date().toISOString()};y([k])}catch(t){L.error("حدث خطأ في تحميل التقارير"),console.error("Reports fetch error:",t)}finally{h(!1)}};if(_)return e.jsx("div",{className:"flex items-center justify-center h-64",children:e.jsx(O,{size:"large",text:"جاري تحميل التقارير..."})});const a=f,j=new Date(i).getMonth()+1,g=new Date(i).getFullYear(),s=w.find(t=>t.month===j&&t.year===g);return e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:"flex justify-between items-center",children:[e.jsxs("div",{children:[e.jsx("h1",{className:"text-3xl font-bold bg-gradient-to-r from-indigo-600 to-purple-600 bg-clip-text text-transparent",children:"التقارير والإحصائيات"}),e.jsx("p",{className:"text-gray-600 mt-1",children:"تقارير الأداء اليومية والشهرية"})]}),e.jsxs("div",{className:"flex space-x-3 space-x-reverse",children:[e.jsx("input",{type:"date",value:i,onChange:t=>D(t.target.value),className:"input focus:ring-2 focus:ring-indigo-500 focus:border-indigo-500 transition-all"}),e.jsxs("button",{className:"btn-secondary hover:scale-105 transition-all duration-200 shadow-lg hover:shadow-xl",children:[e.jsx(Y,{className:"h-5 w-5 ml-2"}),"تصدير"]})]})]}),e.jsxs("div",{className:"card-elevated",children:[e.jsx("div",{className:"card-header",children:e.jsxs("div",{className:"flex items-center",children:[e.jsx(F,{className:"h-6 w-6 text-blue-600 ml-2"}),e.jsxs("h3",{className:"card-title",children:["تقرير يومي - ",new Date(i).toLocaleDateString("ar-AE")]})]})}),a?e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-4",children:[e.jsx("div",{className:"card-compact bg-gradient-to-br from-blue-500 to-blue-600 text-white hover:scale-105 transition-all duration-200",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-blue-100 text-sm font-medium",children:"إجمالي الطلبات"}),e.jsx("p",{className:"text-2xl font-bold",children:a==null?void 0:a.total_orders})]}),e.jsx("div",{className:"p-3 bg-white/20 rounded-lg",children:e.jsx(N,{className:"h-6 w-6"})})]})}),e.jsx("div",{className:"card-compact bg-gradient-to-br from-green-500 to-green-600 text-white hover:scale-105 transition-all duration-200",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-green-100 text-sm font-medium",children:"الطلبات المكتملة"}),e.jsx("p",{className:"text-2xl font-bold",children:a==null?void 0:a.completed_orders})]}),e.jsx("div",{className:"p-3 bg-white/20 rounded-lg",children:e.jsx(m,{className:"h-6 w-6"})})]})}),e.jsx("div",{className:"card-compact bg-gradient-to-br from-yellow-500 to-orange-500 text-white hover:scale-105 transition-all duration-200",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-yellow-100 text-sm font-medium",children:"إجمالي الإيرادات"}),e.jsxs("p",{className:"text-2xl font-bold",children:[a==null?void 0:a.total_revenue," ج.م"]})]}),e.jsx("div",{className:"p-3 bg-white/20 rounded-lg",children:e.jsx(u,{className:"h-6 w-6"})})]})}),e.jsx("div",{className:"card-compact bg-gradient-to-br from-purple-500 to-purple-600 text-white hover:scale-105 transition-all duration-200",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-purple-100 text-sm font-medium",children:"الفرق النشطة"}),e.jsx("p",{className:"text-2xl font-bold",children:a==null?void 0:a.active_teams})]}),e.jsx("div",{className:"p-3 bg-white/20 rounded-lg",children:e.jsx(p,{className:"h-6 w-6"})})]})})]}):e.jsx("div",{className:"text-center py-8",children:e.jsx("p",{className:"text-gray-500",children:"لا توجد بيانات لهذا التاريخ"})})]}),e.jsxs("div",{className:"card-elevated",children:[e.jsx("div",{className:"card-header",children:e.jsxs("div",{className:"flex items-center",children:[e.jsx(d,{className:"h-6 w-6 text-indigo-600 ml-2"}),e.jsx("h3",{className:"card-title",children:"أداء الفرق"})]})}),x.length>0?e.jsx("div",{className:"overflow-x-auto",children:e.jsxs("table",{className:"table",children:[e.jsx("thead",{className:"table-header",children:e.jsxs("tr",{children:[e.jsx("th",{className:"table-header-cell",children:"الفريق"}),e.jsx("th",{className:"table-header-cell",children:"الطلبات المكتملة"}),e.jsx("th",{className:"table-header-cell",children:"الإيرادات"}),e.jsx("th",{className:"table-header-cell",children:"المصروفات"})]})}),e.jsx("tbody",{className:"table-body",children:x.map(t=>e.jsxs("tr",{className:"table-row hover:bg-gray-50 transition-colors",children:[e.jsx("td",{className:"table-cell font-medium",children:t.team_name}),e.jsx("td",{className:"table-cell",children:t.orders_completed}),e.jsxs("td",{className:"table-cell text-green-600 font-semibold",children:[t.total_revenue," ج.م"]}),e.jsxs("td",{className:"table-cell text-red-600 font-semibold",children:[t.total_expenses," ج.م"]})]},t.team_id))})]})}):e.jsx("div",{className:"text-center py-6 text-gray-500",children:"لا توجد بيانات أداء للفرق"})]}),e.jsxs("div",{className:"card-elevated",children:[e.jsx("div",{className:"card-header",children:e.jsxs("div",{className:"flex items-center",children:[e.jsx(d,{className:"h-6 w-6 text-green-600 ml-2"}),e.jsxs("h3",{className:"card-title",children:["تقرير شهري - ",new Date(g,j-1).toLocaleDateString("ar-SA",{month:"long",year:"numeric"})]})]})}),s?e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-4",children:[e.jsx("div",{className:"card-compact bg-gradient-to-br from-blue-500 to-blue-600 text-white hover:scale-105 transition-all duration-200",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-blue-100 text-sm font-medium",children:"إجمالي الطلبات"}),e.jsx("p",{className:"text-2xl font-bold",children:s.total_orders})]}),e.jsx("div",{className:"p-3 bg-white/20 rounded-lg",children:e.jsx(N,{className:"h-6 w-6"})})]})}),e.jsx("div",{className:"card-compact bg-gradient-to-br from-green-500 to-green-600 text-white hover:scale-105 transition-all duration-200",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-green-100 text-sm font-medium",children:"إجمالي الإيرادات"}),e.jsxs("p",{className:"text-2xl font-bold",children:[s.total_revenue," ج.م"]})]}),e.jsx("div",{className:"p-3 bg-white/20 rounded-lg",children:e.jsx(u,{className:"h-6 w-6"})})]})}),e.jsx("div",{className:"card-compact bg-gradient-to-br from-red-500 to-red-600 text-white hover:scale-105 transition-all duration-200",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-red-100 text-sm font-medium",children:"إجمالي المصروفات"}),e.jsxs("p",{className:"text-2xl font-bold",children:[s.total_expenses," ج.م"]})]}),e.jsx("div",{className:"p-3 bg-white/20 rounded-lg",children:e.jsx(m,{className:"h-6 w-6 transform rotate-180"})})]})}),e.jsx("div",{className:`card-compact ${s.net_profit>=0?"bg-gradient-to-br from-emerald-500 to-emerald-600":"bg-gradient-to-br from-orange-500 to-red-500"} text-white hover:scale-105 transition-all duration-200`,children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("p",{className:`${s.net_profit>=0?"text-emerald-100":"text-orange-100"} text-sm font-medium`,children:"صافي الربح"}),e.jsxs("p",{className:"text-2xl font-bold",children:[s.net_profit," ج.م"]})]}),e.jsx("div",{className:"p-3 bg-white/20 rounded-lg",children:e.jsx(m,{className:`h-6 w-6 ${s.net_profit<0?"transform rotate-180":""}`})})]})})]}),e.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-6",children:[e.jsxs("div",{className:"card-compact bg-gradient-to-br from-indigo-50 to-blue-50 border border-indigo-200",children:[e.jsxs("h4",{className:"font-semibold text-indigo-900 mb-3 flex items-center",children:[e.jsx(p,{className:"h-5 w-5 ml-2"}),"أداء الفرق"]}),e.jsxs("div",{className:"space-y-3",children:[e.jsxs("div",{className:"flex justify-between items-center p-2 bg-white/50 rounded-lg",children:[e.jsx("span",{className:"text-indigo-700",children:"متوسط الطلبات لكل فريق:"}),e.jsx("span",{className:"font-bold text-indigo-900",children:Math.round(s.avg_orders_per_team)})]}),e.jsxs("div",{className:"flex justify-between items-center p-2 bg-white/50 rounded-lg",children:[e.jsx("span",{className:"text-indigo-700",children:"متوسط التقييم:"}),e.jsxs("span",{className:"font-bold text-indigo-900",children:[s.avg_rating.toFixed(1),"/5"]})]})]})]}),e.jsxs("div",{className:"card-compact bg-gradient-to-br from-purple-50 to-pink-50 border border-purple-200",children:[e.jsxs("h4",{className:"font-semibold text-purple-900 mb-3 flex items-center",children:[e.jsx(d,{className:"h-5 w-5 ml-2"}),"إحصائيات إضافية"]}),e.jsxs("div",{className:"space-y-3",children:[e.jsxs("div",{className:"flex justify-between items-center p-2 bg-white/50 rounded-lg",children:[e.jsx("span",{className:"text-purple-700",children:"العملاء الجدد:"}),e.jsx("span",{className:"font-bold text-purple-900",children:s.new_customers})]}),e.jsxs("div",{className:"flex justify-between items-center p-2 bg-white/50 rounded-lg",children:[e.jsx("span",{className:"text-purple-700",children:"معدل إكمال الطلبات:"}),e.jsxs("span",{className:"font-bold text-purple-900",children:[s.total_orders>0?Math.round(s.completed_orders/s.total_orders*100):0,"%"]})]})]})]})]})]}):e.jsx("div",{className:"text-center py-8",children:e.jsx("p",{className:"text-gray-500",children:"لا توجد بيانات لهذا الشهر"})})]})]})};export{B as default};
