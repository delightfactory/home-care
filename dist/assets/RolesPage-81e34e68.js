import{c as B,r as m,j as e,z as F,X as D,d as L,y as G,A as R,V as u,s as M,w as T,u as le,U as q,e as ne}from"./index-ea234c37.js";import{G as ie}from"./globe-7b95db56.js";import{C as S}from"./check-circle-6e435bc4.js";import{F as de}from"./file-text-61c3be99.js";import{S as O}from"./save-364108a6.js";import{U as ce}from"./user-plus-f4008a77.js";import{P as oe}from"./phone-10fe367c.js";import{A as me,T as X,P as I}from"./trash-2-1b0f85d5.js";import{P as V}from"./pen-square-9a9a872d.js";import{U as xe}from"./user-x-88a06ed6.js";/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const H=B("Lock",[["rect",{width:"18",height:"11",x:"3",y:"11",rx:"2",ry:"2",key:"1w4ew1"}],["path",{d:"M7 11V7a5 5 0 0 1 10 0v4",key:"fwvmzm"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ue=B("Mail",[["rect",{width:"20",height:"16",x:"2",y:"4",rx:"2",key:"18n3k1"}],["path",{d:"m22 7-8.97 5.7a1.94 1.94 0 0 1-2.06 0L2 7",key:"1ocrg3"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const he=B("UserCog",[["circle",{cx:"18",cy:"15",r:"3",key:"gjjjvw"}],["circle",{cx:"9",cy:"7",r:"4",key:"nufk8"}],["path",{d:"M10 15H6a4 4 0 0 0-4 4v2",key:"1nfge6"}],["path",{d:"m21.7 16.4-.9-.3",key:"12j9ji"}],["path",{d:"m15.2 13.9-.9-.3",key:"1fdjdi"}],["path",{d:"m16.6 18.7.3-.9",key:"heedtr"}],["path",{d:"m19.1 12.2.3-.9",key:"1af3ki"}],["path",{d:"m19.6 18.7-.4-1",key:"1x9vze"}],["path",{d:"m16.8 12.3-.4-1",key:"vqeiwj"}],["path",{d:"m14.3 16.6 1-.4",key:"1qlj63"}],["path",{d:"m20.7 13.8 1-.4",key:"1v5t8k"}]]),ge=({role:a,onClose:h,onSuccess:i})=>{const[y,b]=m.useState(!1),[f,g]=m.useState({}),[l,U]=m.useState({}),[t,_]=m.useState({name:"",name_ar:"",description:"",is_active:!0}),[d,n]=m.useState({customers:{create:!1,read:!1,update:!1,delete:!1},services:{create:!1,read:!1,update:!1,delete:!1},workers:{create:!1,read:!1,update:!1,delete:!1},teams:{create:!1,read:!1,update:!1,delete:!1},orders:{create:!1,read:!1,update:!1,delete:!1,assign:!1},routes:{create:!1,read:!1,update:!1,delete:!1},expenses:{create:!1,read:!1,update:!1,delete:!1,approve:!1,limit:null},reports:{create:!1,read:!1,update:!1,delete:!1,export:!1},settings:{create:!1,read:!1,update:!1,delete:!1},users:{create:!1,read:!1,update:!1,delete:!1,manage_roles:!1},admin:!1});m.useEffect(()=>{a&&(_({name:a.name,name_ar:a.name_ar,description:a.description||"",is_active:a.is_active}),n(a.permissions))},[a]);const p=()=>{const r={};return t.name.trim()||(r.name="ุงุณู ุงูุฏูุฑ ุจุงูุฅูุฌููุฒูุฉ ูุทููุจ"),t.name_ar.trim()||(r.name_ar="ุงุณู ุงูุฏูุฑ ุจุงูุนุฑุจูุฉ ูุทููุจ"),U(r),Object.keys(r).length===0},N=r=>{g(o=>({...o,[r]:!0})),p()},v=async r=>{if(r.preventDefault(),!!p()){b(!0);try{const o={...t,permissions:d};let x;a?x=await R.updateRole(a.id,o):x=await R.createRole(o),x.success?(u.success(x.message||`ุชู ${a?"ุชุญุฏูุซ":"ุฅูุดุงุก"} ุงูุฏูุฑ ุจูุฌุงุญ`),i()):u.error(x.error||"ุญุฏุซ ุฎุทุฃ ุฃุซูุงุก ุญูุธ ุงูุฏูุฑ")}catch{u.error("ุญุฏุซ ุฎุทุฃ ุบูุฑ ูุชููุน")}finally{b(!1)}}},$=(r,o,x)=>{n(j=>({...j,[r]:typeof j[r]=="object"&&j[r]!==null?{...j[r],[o]:x}:x}))},c=r=>{n(r?{customers:{create:!0,read:!0,update:!0,delete:!0},services:{create:!0,read:!0,update:!0,delete:!0},workers:{create:!0,read:!0,update:!0,delete:!0},teams:{create:!0,read:!0,update:!0,delete:!0},orders:{create:!0,read:!0,update:!0,delete:!0,assign:!0},routes:{create:!0,read:!0,update:!0,delete:!0},expenses:{create:!0,read:!0,update:!0,delete:!0,approve:!0,limit:null},reports:{create:!0,read:!0,update:!0,delete:!0,export:!0},settings:{create:!0,read:!0,update:!0,delete:!0},users:{create:!0,read:!0,update:!0,delete:!0,manage_roles:!0},admin:!0}:o=>({...o,admin:!1}))},k=[{key:"customers",name:"ุงูุนููุงุก",icon:"๐ฅ"},{key:"services",name:"ุงูุฎุฏูุงุช",icon:"๐๏ธ"},{key:"workers",name:"ุงูุนูุงู",icon:"๐ท"},{key:"teams",name:"ุงููุฑู",icon:"๐จโ๐ฉโ๐งโ๐ฆ"},{key:"orders",name:"ุงูุทูุจุงุช",icon:"๐"},{key:"routes",name:"ุฎุทูุท ุงูุณูุฑ",icon:"๐บ๏ธ"},{key:"expenses",name:"ุงููุตุฑููุงุช",icon:"๐ฐ"},{key:"reports",name:"ุงูุชูุงุฑูุฑ",icon:"๐"},{key:"settings",name:"ุงูุฅุนุฏุงุฏุงุช",icon:"โ๏ธ"},{key:"users",name:"ุงููุณุชุฎุฏููู",icon:"๐ค"}];return e.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50 p-4",children:e.jsxs("div",{className:"bg-white rounded-lg shadow-xl w-full max-w-4xl max-h-[90vh] overflow-hidden",children:[e.jsx("div",{className:"bg-gradient-to-r from-blue-600 to-indigo-600 p-6",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"flex items-center text-white",children:[e.jsx("div",{className:"bg-white/20 p-2 rounded-lg ml-3",children:e.jsx(F,{className:"h-6 w-6"})}),e.jsxs("div",{children:[e.jsx("h2",{className:"text-xl font-bold",children:a?"ุชุนุฏูู ุงูุฏูุฑ":"ุฅุถุงูุฉ ุฏูุฑ ุฌุฏูุฏ"}),e.jsx("p",{className:"text-blue-100 text-sm mt-1",children:a?"ุชุญุฏูุซ ุจูุงูุงุช ุงูุฏูุฑ ูุงูุตูุงุญูุงุช":"ุฅูุดุงุก ุฏูุฑ ุฌุฏูุฏ ูุน ุชุญุฏูุฏ ุงูุตูุงุญูุงุช"})]})]}),e.jsx("button",{onClick:h,className:"text-white/80 hover:text-white hover:bg-white/20 p-2 rounded-lg transition-all duration-200",children:e.jsx(D,{className:"h-5 w-5"})})]})}),e.jsxs("form",{onSubmit:v,className:"flex flex-col h-full",children:[e.jsxs("div",{className:"flex-1 overflow-y-auto p-6",children:[e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6 mb-8",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"ุงุณู ุงูุฏูุฑ (ุจุงูุฅูุฌููุฒูุฉ) *"}),e.jsxs("div",{className:"relative",children:[e.jsx("div",{className:"absolute inset-y-0 left-0 pl-3 flex items-center pointer-events-none",children:e.jsx(ie,{className:`h-5 w-5 ${f.name&&l.name?"text-red-400":"text-gray-400"}`})}),e.jsx("input",{type:"text",value:t.name,onChange:r=>_(o=>({...o,name:r.target.value})),onBlur:()=>N("name"),className:`w-full pl-10 pr-4 py-3 border rounded-lg focus:outline-none focus:ring-2 transition-all duration-200 ${f.name&&l.name?"border-red-300 focus:ring-red-500 focus:border-red-500 bg-red-50":"border-gray-300 focus:ring-blue-500 focus:border-blue-500 hover:border-gray-400"}`,placeholder:"manager",required:!0}),f.name&&!l.name&&t.name&&e.jsx("div",{className:"absolute inset-y-0 right-0 pr-3 flex items-center",children:e.jsx(S,{className:"h-5 w-5 text-green-400"})})]}),f.name&&l.name&&e.jsx("p",{className:"mt-1 text-sm text-red-600",children:l.name})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"ุงุณู ุงูุฏูุฑ (ุจุงูุนุฑุจูุฉ) *"}),e.jsxs("div",{className:"relative",children:[e.jsx("div",{className:"absolute inset-y-0 left-0 pl-3 flex items-center pointer-events-none",children:e.jsx(L,{className:`h-5 w-5 ${f.name_ar&&l.name_ar?"text-red-400":"text-gray-400"}`})}),e.jsx("input",{type:"text",value:t.name_ar,onChange:r=>_(o=>({...o,name_ar:r.target.value})),onBlur:()=>N("name_ar"),className:`w-full pl-10 pr-4 py-3 border rounded-lg focus:outline-none focus:ring-2 transition-all duration-200 ${f.name_ar&&l.name_ar?"border-red-300 focus:ring-red-500 focus:border-red-500 bg-red-50":"border-gray-300 focus:ring-blue-500 focus:border-blue-500 hover:border-gray-400"}`,placeholder:"ุงููุฏูุฑ ุงูุนุงู",required:!0}),f.name_ar&&!l.name_ar&&t.name_ar&&e.jsx("div",{className:"absolute inset-y-0 right-0 pr-3 flex items-center",children:e.jsx(S,{className:"h-5 w-5 text-green-400"})})]}),f.name_ar&&l.name_ar&&e.jsx("p",{className:"mt-1 text-sm text-red-600",children:l.name_ar})]}),e.jsxs("div",{className:"md:col-span-2",children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"ุงููุตู"}),e.jsxs("div",{className:"relative",children:[e.jsx("div",{className:"absolute top-3 left-3 pointer-events-none",children:e.jsx(de,{className:"h-5 w-5 text-gray-400"})}),e.jsx("textarea",{value:t.description,onChange:r=>_(o=>({...o,description:r.target.value})),className:"w-full pl-10 pr-4 py-3 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-blue-500 hover:border-gray-400 transition-all duration-200",rows:3,placeholder:"ูุตู ูุฎุชุตุฑ ููุฏูุฑ ูุตูุงุญูุงุชู"})]})]}),e.jsxs("div",{className:"flex items-center p-4 bg-gray-50 rounded-lg",children:[e.jsxs("div",{className:"flex items-center",children:[e.jsx("input",{type:"checkbox",id:"is_active",checked:t.is_active,onChange:r=>_(o=>({...o,is_active:r.target.checked})),className:"h-4 w-4 text-blue-600 focus:ring-blue-500 border-gray-300 rounded"}),e.jsxs("label",{htmlFor:"is_active",className:"mr-3 flex items-center text-sm font-medium text-gray-900",children:[e.jsx(S,{className:"h-4 w-4 ml-2 text-green-500"}),"ูุดุท"]})]}),e.jsx("span",{className:"text-xs text-gray-500 mr-auto",children:t.is_active?"ุงูุฏูุฑ ูุชุงุญ ููุงุณุชุฎุฏุงู":"ุงูุฏูุฑ ุบูุฑ ูุชุงุญ ููุงุณุชุฎุฏุงู"})]})]}),e.jsxs("div",{className:"mb-6 p-4 bg-red-50 border border-red-200 rounded-lg",children:[e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("input",{type:"checkbox",id:"admin",checked:d.admin,onChange:r=>c(r.target.checked),className:"h-4 w-4 text-red-600 focus:ring-red-500 border-gray-300 rounded"}),e.jsx("label",{htmlFor:"admin",className:"text-sm font-medium text-red-700",children:"ุตูุงุญูุงุช ุงููุฏูุฑ ุงูุนุงู (ุฌููุน ุงูุตูุงุญูุงุช)"})]}),e.jsx("p",{className:"text-xs text-red-600 mt-1",children:"ุชูุนูู ูุฐุง ุงูุฎูุงุฑ ูุนุทู ุตูุงุญูุงุช ูุงููุฉ ุนูู ุฌููุน ุฃุฌุฒุงุก ุงููุธุงู"})]}),!d.admin&&e.jsxs("div",{children:[e.jsxs("div",{className:"flex items-center mb-4",children:[e.jsx("div",{className:"bg-blue-100 p-2 rounded-lg ml-3",children:e.jsx(G,{className:"h-5 w-5 text-blue-600"})}),e.jsxs("div",{children:[e.jsx("h3",{className:"text-lg font-semibold text-gray-900",children:"ุงูุตูุงุญูุงุช ุงูุชูุตูููุฉ"}),e.jsx("p",{className:"text-sm text-gray-500",children:"ุญุฏุฏ ุงูุตูุงุญูุงุช ุงููุชุงุญุฉ ููุฐุง ุงูุฏูุฑ"})]})]}),e.jsx("div",{className:"space-y-6",children:k.map(r=>{const o=d[r.key];return typeof o!="object"||o===null?null:e.jsxs("div",{className:"border border-gray-200 rounded-lg p-4",children:[e.jsxs("h4",{className:"font-medium text-gray-900 mb-3 flex items-center gap-2",children:[e.jsx("span",{children:r.icon}),r.name]}),e.jsx("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-3",children:Object.entries(o).map(([x,j])=>{if(x==="limit")return e.jsxs("div",{className:"md:col-span-2",children:[e.jsx("label",{className:"block text-xs text-gray-600 mb-1",children:"ุญุฏ ุงูููุงููุฉ (ุฌ.ู)"}),e.jsx("input",{type:"number",value:typeof j=="number"?j.toString():"",onChange:C=>$(r.key,x,C.target.value?parseFloat(C.target.value):null),className:"w-full px-2 py-1 text-xs border border-gray-300 rounded focus:outline-none focus:ring-1 focus:ring-blue-500",placeholder:"ุจุฏูู ุญุฏ"})]},x);if(typeof j!="boolean")return null;const E={create:"ุฅูุดุงุก",read:"ุนุฑุถ",update:"ุชุนุฏูู",delete:"ุญุฐู",assign:"ุชุฎุตูุต",approve:"ููุงููุฉ",export:"ุชุตุฏูุฑ",manage_roles:"ุฅุฏุงุฑุฉ ุงูุฃุฏูุงุฑ",team_only:"ุงููุฑูู ููุท"};return e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("input",{type:"checkbox",id:`${r.key}_${x}`,checked:j,onChange:C=>$(r.key,x,C.target.checked),className:"h-3 w-3 text-blue-600 focus:ring-blue-500 border-gray-300 rounded"}),e.jsx("label",{htmlFor:`${r.key}_${x}`,className:"text-xs text-gray-700",children:E[x]||x})]},x)})})]},r.key)})})]})]}),e.jsxs("div",{className:"flex items-center justify-end gap-3 p-6 border-t border-gray-200 bg-gradient-to-r from-gray-50 to-gray-100",children:[e.jsxs("button",{type:"button",onClick:h,className:"px-6 py-3 text-sm font-medium text-gray-700 bg-white border border-gray-300 rounded-lg hover:bg-gray-50 hover:border-gray-400 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-gray-500 transition-all duration-200 flex items-center gap-2",children:[e.jsx(D,{className:"h-4 w-4"}),"ุฅูุบุงุก"]}),e.jsxs("button",{type:"submit",disabled:y,className:"px-6 py-3 text-sm font-medium text-white bg-gradient-to-r from-blue-600 to-indigo-600 border border-transparent rounded-lg hover:from-blue-700 hover:to-indigo-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-blue-500 disabled:opacity-50 disabled:cursor-not-allowed transition-all duration-200 flex items-center gap-2 shadow-lg hover:shadow-xl",children:[y?e.jsx("div",{className:"animate-spin rounded-full h-4 w-4 border-b-2 border-white"}):e.jsx(O,{className:"h-4 w-4"}),y?"ุฌุงุฑู ุงูุญูุธ...":a?"ุชุญุฏูุซ":"ุฅูุดุงุก"]})]})]})]})})},be=({user:a,roles:h,onClose:i,onSuccess:y})=>{const[b,f]=m.useState(!1),[g,l]=m.useState(a.role_id||""),U=async n=>{if(n.preventDefault(),!g){u.error("ูุฑุฌู ุงุฎุชูุงุฑ ุฏูุฑ ูููุณุชุฎุฏู");return}if(g===a.role_id){u.error("ูู ูุชู ุชุบููุฑ ุงูุฏูุฑ"),i();return}f(!0);try{const p=await R.updateUserRole(a.id,g);p.success?(u.success(p.message||"ุชู ุชุญุฏูุซ ุฏูุฑ ุงููุณุชุฎุฏู ุจูุฌุงุญ"),y()):u.error(p.error||"ุญุฏุซ ุฎุทุฃ ุฃุซูุงุก ุชุญุฏูุซ ุฏูุฑ ุงููุณุชุฎุฏู")}catch{u.error("ุญุฏุซ ุฎุทุฃ ุบูุฑ ูุชููุน")}finally{f(!1)}},t=h.find(n=>n.id===g),_=n=>{switch(n){case"manager":return"bg-red-100 text-red-800 border-red-200";case"operations_supervisor":return"bg-blue-100 text-blue-800 border-blue-200";case"receptionist":return"bg-green-100 text-green-800 border-green-200";case"team_leader":return"bg-yellow-100 text-yellow-800 border-yellow-200";default:return"bg-gray-100 text-gray-800 border-gray-200"}},d=n=>{if(n.admin)return"ุฌููุน ุงูุตูุงุญูุงุช";let p=0;return Object.values(n).forEach(N=>{typeof N=="object"&&N!==null&&Object.values(N).forEach(v=>{v===!0&&p++})}),`${p} ุตูุงุญูุฉ`};return e.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50 p-4",onClick:i,children:e.jsxs("div",{className:"bg-white rounded-lg shadow-xl w-full max-w-md max-h-[80vh] overflow-y-auto",onClick:n=>n.stopPropagation(),children:[e.jsxs("div",{className:"flex items-center justify-between p-6 border-b border-gray-200",children:[e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx(L,{className:"h-6 w-6 text-blue-600"}),e.jsx("h2",{className:"text-xl font-semibold text-gray-900",children:"ุชุบููุฑ ุฏูุฑ ุงููุณุชุฎุฏู"})]}),e.jsx("button",{onClick:i,className:"text-gray-400 hover:text-gray-600 transition-colors",children:e.jsx(D,{className:"h-6 w-6"})})]}),e.jsxs("form",{onSubmit:U,children:[e.jsxs("div",{className:"p-6",children:[e.jsxs("div",{className:"mb-6 p-4 bg-gray-50 rounded-lg",children:[e.jsx("h3",{className:"font-medium text-gray-900 mb-2",children:"ูุนูููุงุช ุงููุณุชุฎุฏู"}),e.jsxs("div",{className:"text-sm text-gray-600",children:[e.jsxs("div",{className:"mb-1",children:[e.jsx("span",{className:"font-medium",children:"ุงูุงุณู:"})," ",a.full_name]}),a.phone&&e.jsxs("div",{className:"mb-1",children:[e.jsx("span",{className:"font-medium",children:"ุงููุงุชู:"})," ",a.phone]}),e.jsxs("div",{children:[e.jsx("span",{className:"font-medium",children:"ุงูุฏูุฑ ุงูุญุงูู:"})," ",a.role?e.jsx("span",{className:`inline-flex items-center px-2 py-0.5 rounded-full text-xs font-medium border ${_(a.role.name)}`,children:a.role.name_ar}):e.jsx("span",{className:"text-gray-400",children:"ุจุฏูู ุฏูุฑ"})]})]})]}),e.jsxs("div",{className:"mb-6",children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-3",children:"ุงุฎุชูุงุฑ ุงูุฏูุฑ ุงูุฌุฏูุฏ *"}),e.jsx("div",{className:"space-y-3",children:h.filter(n=>n.is_active).map(n=>e.jsxs("div",{className:"relative",children:[e.jsx("input",{type:"radio",id:n.id,name:"role",value:n.id,checked:g===n.id,onChange:p=>l(p.target.value),className:"sr-only"}),e.jsx("label",{htmlFor:n.id,className:`block p-4 border rounded-lg cursor-pointer transition-colors ${g===n.id?"border-blue-500 bg-blue-50":"border-gray-200 hover:border-gray-300"}`,children:e.jsxs("div",{className:"flex items-start justify-between",children:[e.jsxs("div",{className:"flex-1",children:[e.jsxs("div",{className:"flex items-center gap-3 mb-2",children:[e.jsx("span",{className:`inline-flex items-center px-2.5 py-0.5 rounded-full text-xs font-medium border ${_(n.name)}`,children:n.name_ar}),e.jsx("span",{className:"text-xs text-gray-500",children:d(n.permissions)})]}),n.description&&e.jsx("p",{className:"text-sm text-gray-600",children:n.description})]}),e.jsx("div",{className:`w-4 h-4 rounded-full border-2 flex items-center justify-center ${g===n.id?"border-blue-500 bg-blue-500":"border-gray-300"}`,children:g===n.id&&e.jsx("div",{className:"w-2 h-2 rounded-full bg-white"})})]})})]},n.id))})]}),t&&e.jsxs("div",{className:"mb-6 p-4 bg-blue-50 border border-blue-200 rounded-lg",children:[e.jsx("h4",{className:"font-medium text-blue-900 mb-2",children:"ุชูุงุตูู ุงูุฏูุฑ ุงููุญุฏุฏ"}),e.jsxs("div",{className:"text-sm text-blue-800",children:[e.jsxs("div",{className:"mb-1",children:[e.jsx("span",{className:"font-medium",children:"ุงูุงุณู:"})," ",t.name_ar]}),e.jsxs("div",{className:"mb-1",children:[e.jsx("span",{className:"font-medium",children:"ุงูุตูุงุญูุงุช:"})," ",d(t.permissions)]}),t.description&&e.jsxs("div",{children:[e.jsx("span",{className:"font-medium",children:"ุงููุตู:"})," ",t.description]})]})]})]}),e.jsxs("div",{className:"flex items-center justify-end gap-3 p-6 border-t border-gray-200 bg-gray-50",children:[e.jsx("button",{type:"button",onClick:i,className:"px-4 py-2 text-gray-700 bg-white border border-gray-300 rounded-md hover:bg-gray-50 transition-colors",children:"ุฅูุบุงุก"}),e.jsxs("button",{type:"submit",disabled:b||!g,className:"flex items-center gap-2 px-4 py-2 bg-blue-600 text-white rounded-md hover:bg-blue-700 disabled:opacity-50 disabled:cursor-not-allowed transition-colors",children:[b?e.jsx("div",{className:"animate-spin rounded-full h-4 w-4 border-b-2 border-white"}):e.jsx(O,{className:"h-4 w-4"}),"ุชุญุฏูุซ ุงูุฏูุฑ"]})]})]})]})})};class A{static async createUser(h){try{const{error:i}=await M.rpc("create_user_with_role",{p_email:h.email,p_password:h.password,p_full_name:h.full_name,p_phone:h.phone||null,p_role_id:h.role_id,p_is_active:h.is_active??!0});if(i)throw i;return{success:!0,message:"ุชู ุฅูุดุงุก ุงููุณุชุฎุฏู ุจูุฌุงุญ"}}catch(i){return{success:!1,error:T(i)}}}static async updateUser(h,i){try{const{error:y}=await M.rpc("update_user_with_role",{p_user_id:h,p_full_name:i.full_name??null,p_phone:i.phone??null,p_role_id:i.role_id??null,p_is_active:i.is_active??null});if(y)throw y;return{success:!0,message:"ุชู ุชุญุฏูุซ ุจูุงูุงุช ุงููุณุชุฎุฏู"}}catch(y){return{success:!1,error:T(y)}}}static async deleteUser(h){try{const{error:i}=await M.rpc("delete_user_and_auth",{p_user_id:h});if(i)throw i;return{success:!0,message:"ุชู ุญุฐู ุงููุณุชุฎุฏู"}}catch(i){return{success:!1,error:T(i)}}}}const fe=({user:a,roles:h,onClose:i,onSuccess:y})=>{const b=!!a,[f,g]=m.useState(!1),[l,U]=m.useState({}),[t,_]=m.useState({}),[d,n]=m.useState({email:"",password:"",full_name:"",phone:"",role_id:"",is_active:!0});m.useEffect(()=>{a&&n(c=>({...c,email:a.email??"",full_name:a.full_name??"",phone:a.phone||"",role_id:a.role_id||"",is_active:a.is_active}))},[a]);const p=()=>{const c={};return!b&&!d.email.trim()&&(c.email="ุงูุจุฑูุฏ ุงูุฅููุชุฑููู ูุทููุจ"),!b&&!d.password.trim()&&(c.password="ูููุฉ ุงููุฑูุฑ ูุทููุจุฉ"),d.full_name.trim()||(c.full_name="ุงูุงุณู ุงููุงูู ูุทููุจ"),d.role_id||(c.role_id="ุงูุฏูุฑ ูุทููุจ"),_(c),Object.keys(c).length===0},N=c=>{U(k=>({...k,[c]:!0})),p()},v=c=>{const{name:k,value:r,type:o}=c.target;n(x=>({...x,[k]:o==="checkbox"?c.target.checked:r}))},$=async c=>{if(c.preventDefault(),!!p()){g(!0);try{if(b&&a){const{success:k,error:r,message:o}=await A.updateUser(a.id,{full_name:d.full_name,phone:d.phone,role_id:d.role_id,is_active:d.is_active});k?(u.success(o||"ุชู ุชุญุฏูุซ ุงููุณุชุฎุฏู"),y()):u.error(r||"ุฎุทุฃ ุฃุซูุงุก ุงูุชุญุฏูุซ")}else{const{success:k,error:r,message:o}=await A.createUser(d);k?(u.success(o||"ุชู ุฅูุดุงุก ุงููุณุชุฎุฏู"),y()):u.error(r||"ุฎุทุฃ ุฃุซูุงุก ุงูุฅูุดุงุก")}}catch{u.error("ุฎุทุฃ ุบูุฑ ูุชููุน")}finally{g(!1)}}};return e.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50 p-4",onClick:i,children:e.jsxs("div",{className:"bg-white rounded-lg shadow-xl w-full max-w-lg max-h-[80vh] overflow-y-auto",onClick:c=>c.stopPropagation(),children:[e.jsx("div",{className:"bg-gradient-to-r from-blue-600 to-indigo-600 p-6 rounded-t-lg",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"flex items-center text-white",children:[e.jsx("div",{className:"bg-white/20 p-2 rounded-lg ml-3",children:e.jsx(ce,{className:"h-6 w-6"})}),e.jsxs("div",{children:[e.jsx("h2",{className:"text-xl font-bold",children:b?"ุชุนุฏูู ูุณุชุฎุฏู":"ูุณุชุฎุฏู ุฌุฏูุฏ"}),e.jsx("p",{className:"text-blue-100 text-sm mt-1",children:b?"ุชุญุฏูุซ ุจูุงูุงุช ุงููุณุชุฎุฏู":"ุฅูุดุงุก ุญุณุงุจ ูุณุชุฎุฏู ุฌุฏูุฏ"})]})]}),e.jsx("button",{onClick:i,className:"text-white/80 hover:text-white hover:bg-white/20 p-2 rounded-lg transition-all duration-200",children:e.jsx(D,{className:"h-5 w-5"})})]})}),e.jsxs("form",{onSubmit:$,children:[e.jsxs("div",{className:"p-6 space-y-4",children:[e.jsxs("div",{children:[e.jsxs("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:["ุงูุจุฑูุฏ ุงูุฅููุชุฑููู ",!b&&"*"]}),e.jsxs("div",{className:"relative",children:[e.jsx("div",{className:"absolute inset-y-0 left-0 pl-3 flex items-center pointer-events-none",children:e.jsx(ue,{className:`h-5 w-5 ${l.email&&t.email?"text-red-400":"text-gray-400"}`})}),e.jsx("input",{type:"email",name:"email",value:d.email,onChange:v,onBlur:()=>N("email"),disabled:b,className:`w-full pl-10 pr-4 py-3 border rounded-lg focus:outline-none focus:ring-2 transition-all duration-200 ${l.email&&t.email?"border-red-300 focus:ring-red-500 focus:border-red-500 bg-red-50":"border-gray-300 focus:ring-blue-500 focus:border-blue-500 hover:border-gray-400"} ${b?"bg-gray-100 cursor-not-allowed":""}`,placeholder:"example@example.com"}),l.email&&!t.email&&d.email&&e.jsx("div",{className:"absolute inset-y-0 right-0 pr-3 flex items-center",children:e.jsx(S,{className:"h-5 w-5 text-green-400"})})]}),l.email&&t.email&&e.jsx("p",{className:"mt-1 text-sm text-red-600",children:t.email})]}),!b&&e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"ูููุฉ ุงููุฑูุฑ *"}),e.jsxs("div",{className:"relative",children:[e.jsx("div",{className:"absolute inset-y-0 left-0 pl-3 flex items-center pointer-events-none",children:e.jsx(H,{className:`h-5 w-5 ${l.password&&t.password?"text-red-400":"text-gray-400"}`})}),e.jsx("input",{type:"password",name:"password",value:d.password,onChange:v,onBlur:()=>N("password"),className:`w-full pl-10 pr-4 py-3 border rounded-lg focus:outline-none focus:ring-2 transition-all duration-200 ${l.password&&t.password?"border-red-300 focus:ring-red-500 focus:border-red-500 bg-red-50":"border-gray-300 focus:ring-blue-500 focus:border-blue-500 hover:border-gray-400"}`,placeholder:"โขโขโขโขโขโขโขโข"}),l.password&&!t.password&&d.password&&e.jsx("div",{className:"absolute inset-y-0 right-0 pr-3 flex items-center",children:e.jsx(S,{className:"h-5 w-5 text-green-400"})})]}),l.password&&t.password&&e.jsx("p",{className:"mt-1 text-sm text-red-600",children:t.password})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"ุงูุงุณู ุงููุงูู *"}),e.jsxs("div",{className:"relative",children:[e.jsx("div",{className:"absolute inset-y-0 left-0 pl-3 flex items-center pointer-events-none",children:e.jsx(L,{className:`h-5 w-5 ${l.full_name&&t.full_name?"text-red-400":"text-gray-400"}`})}),e.jsx("input",{type:"text",name:"full_name",value:d.full_name,onChange:v,onBlur:()=>N("full_name"),className:`w-full pl-10 pr-4 py-3 border rounded-lg focus:outline-none focus:ring-2 transition-all duration-200 ${l.full_name&&t.full_name?"border-red-300 focus:ring-red-500 focus:border-red-500 bg-red-50":"border-gray-300 focus:ring-blue-500 focus:border-blue-500 hover:border-gray-400"}`,placeholder:"ุงูุงุณู ุงููุงูู"}),l.full_name&&!t.full_name&&d.full_name&&e.jsx("div",{className:"absolute inset-y-0 right-0 pr-3 flex items-center",children:e.jsx(S,{className:"h-5 w-5 text-green-400"})})]}),l.full_name&&t.full_name&&e.jsx("p",{className:"mt-1 text-sm text-red-600",children:t.full_name})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"ุงููุงุชู (ุงุฎุชูุงุฑู)"}),e.jsxs("div",{className:"relative",children:[e.jsx("div",{className:"absolute inset-y-0 left-0 pl-3 flex items-center pointer-events-none",children:e.jsx(oe,{className:"h-5 w-5 text-gray-400"})}),e.jsx("input",{type:"text",name:"phone",value:d.phone,onChange:v,className:"w-full pl-10 pr-4 py-3 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-blue-500 hover:border-gray-400 transition-all duration-200",placeholder:"05XXXXXXXX"}),d.phone&&e.jsx("div",{className:"absolute inset-y-0 right-0 pr-3 flex items-center",children:e.jsx(S,{className:"h-5 w-5 text-green-400"})})]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"ุงูุฏูุฑ *"}),e.jsxs("div",{className:"relative",children:[e.jsx("div",{className:"absolute inset-y-0 left-0 pl-3 flex items-center pointer-events-none",children:e.jsx(F,{className:`h-5 w-5 ${l.role_id&&t.role_id?"text-red-400":"text-gray-400"}`})}),e.jsxs("select",{name:"role_id",value:d.role_id,onChange:v,onBlur:()=>N("role_id"),className:`w-full pl-10 pr-4 py-3 border rounded-lg focus:outline-none focus:ring-2 transition-all duration-200 appearance-none ${l.role_id&&t.role_id?"border-red-300 focus:ring-red-500 focus:border-red-500 bg-red-50":"border-gray-300 focus:ring-blue-500 focus:border-blue-500 hover:border-gray-400"}`,children:[e.jsx("option",{value:"",children:"ุงุฎุชุฑ ุงูุฏูุฑ"}),h.filter(c=>c.is_active).map(c=>e.jsx("option",{value:c.id,children:c.name_ar},c.id))]}),l.role_id&&!t.role_id&&d.role_id&&e.jsx("div",{className:"absolute inset-y-0 right-0 pr-3 flex items-center",children:e.jsx(S,{className:"h-5 w-5 text-green-400"})})]}),l.role_id&&t.role_id&&e.jsx("p",{className:"mt-1 text-sm text-red-600",children:t.role_id})]}),e.jsxs("div",{className:"flex items-center p-4 bg-gray-50 rounded-lg",children:[e.jsxs("div",{className:"flex items-center",children:[e.jsx("input",{type:"checkbox",id:"is_active",name:"is_active",checked:d.is_active,onChange:v,className:"h-4 w-4 text-blue-600 focus:ring-blue-500 border-gray-300 rounded"}),e.jsxs("label",{htmlFor:"is_active",className:"mr-3 flex items-center text-sm font-medium text-gray-900",children:[e.jsx(S,{className:"h-4 w-4 ml-2 text-green-500"}),"ูุนุงู"]})]}),e.jsx("span",{className:"text-xs text-gray-500 mr-auto",children:d.is_active?"ุงููุณุชุฎุฏู ูุชุงุญ ููุฏุฎูู":"ุงููุณุชุฎุฏู ุบูุฑ ูุชุงุญ ููุฏุฎูู"})]})]}),e.jsxs("div",{className:"flex items-center justify-end gap-3 p-6 border-t border-gray-200 bg-gradient-to-r from-gray-50 to-gray-100",children:[e.jsxs("button",{type:"button",onClick:i,className:"px-6 py-3 text-sm font-medium text-gray-700 bg-white border border-gray-300 rounded-lg hover:bg-gray-50 hover:border-gray-400 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-gray-500 transition-all duration-200 flex items-center gap-2",children:[e.jsx(D,{className:"h-4 w-4"}),"ุฅูุบุงุก"]}),e.jsxs("button",{type:"submit",disabled:f,className:"px-6 py-3 text-sm font-medium text-white bg-gradient-to-r from-blue-600 to-indigo-600 border border-transparent rounded-lg hover:from-blue-700 hover:to-indigo-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-blue-500 disabled:opacity-50 disabled:cursor-not-allowed transition-all duration-200 flex items-center gap-2 shadow-lg hover:shadow-xl",children:[f?e.jsx("div",{className:"animate-spin rounded-full h-4 w-4 border-b-2 border-white"}):e.jsx(O,{className:"h-4 w-4"}),f?"ุฌุงุฑู ุงูุญูุธ...":b?"ุชุญุฏูุซ":"ุฅูุดุงุก"]})]})]})]})})},pe=({isOpen:a,onClose:h,onConfirm:i,title:y,message:b,confirmText:f="ุญุฐู",cancelText:g="ุฅูุบุงุก",loading:l=!1})=>a?e.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50 p-4",children:e.jsxs("div",{className:"bg-white rounded-lg shadow-xl w-full max-w-md",children:[e.jsxs("div",{className:"flex items-center justify-between p-6 border-b border-gray-200",children:[e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("div",{className:"flex items-center justify-center w-10 h-10 bg-red-100 rounded-full",children:e.jsx(me,{className:"h-5 w-5 text-red-600"})}),e.jsx("h2",{className:"text-xl font-semibold text-gray-900",children:y})]}),e.jsx("button",{onClick:h,className:"text-gray-400 hover:text-gray-600 transition-colors",disabled:l,children:e.jsx(D,{className:"h-6 w-6"})})]}),e.jsx("div",{className:"p-6",children:e.jsx("p",{className:"text-gray-600 leading-relaxed",children:b})}),e.jsxs("div",{className:"flex items-center justify-end gap-3 p-6 border-t border-gray-200 bg-gray-50",children:[e.jsx("button",{type:"button",onClick:h,disabled:l,className:"px-4 py-2 text-gray-700 bg-white border border-gray-300 rounded-md hover:bg-gray-50 disabled:opacity-50 disabled:cursor-not-allowed transition-colors",children:g}),e.jsxs("button",{type:"button",onClick:i,disabled:l,className:"flex items-center gap-2 px-4 py-2 bg-red-600 text-white rounded-md hover:bg-red-700 disabled:opacity-50 disabled:cursor-not-allowed transition-colors",children:[l?e.jsx("div",{className:"animate-spin rounded-full h-4 w-4 border-b-2 border-white"}):e.jsx(X,{className:"h-4 w-4"}),f]})]})]})}):null,$e=()=>{le();const[a,h]=m.useState([]),[i,y]=m.useState([]),[b,f]=m.useState(!0),[g,l]=m.useState("roles"),[U,t]=m.useState(!1),[_,d]=m.useState(!1),[n,p]=m.useState(!1),[N,v]=m.useState(null),[$,c]=m.useState(null),[k,r]=m.useState(!1),[o,x]=m.useState(null),[j,E]=m.useState(null);m.useEffect(()=>{C()},[]);const C=async()=>{f(!0);try{const[s,w]=await Promise.all([R.getRoles(),R.getUsersWithRoles()]);s.success?h(s.data??[]):u.error(s.error||"ุฎุทุฃ ูู ุชุญููู ุงูุฃุฏูุงุฑ"),w.success?y(w.data??[]):u.error(w.error||"ุฎุทุฃ ูู ุชุญููู ุงููุณุชุฎุฏููู")}catch{u.error("ุฎุทุฃ ูู ุชุญููู ุงูุจูุงูุงุช")}finally{f(!1)}},W=()=>{v(null),t(!0)},J=s=>{v(s),t(!0)},K=s=>{E({type:"role",id:s.id,name:s.name_ar}),p(!0)},Q=()=>{x(null),r(!0)},Y=s=>{x(s),r(!0)},Z=s=>{c(s),d(!0)},ee=s=>{E({type:"user",id:s.id,name:s.full_name}),p(!0)},se=async s=>{try{const w=await R.toggleUserStatus(s.id,!s.is_active);w.success?(u.success(w.message||"ุชู ุชุญุฏูุซ ุญุงูุฉ ุงููุณุชุฎุฏู"),C()):u.error(w.error||"ุฎุทุฃ ูู ุชุญุฏูุซ ุญุงูุฉ ุงููุณุชุฎุฏู")}catch{u.error("ุฎุทุฃ ูู ุชุญุฏูุซ ุญุงูุฉ ุงููุณุชุฎุฏู")}},re=async()=>{if(j)try{if(j.type==="role"){const s=await R.deleteRole(j.id);s.success?(u.success(s.message||"ุชู ุญุฐู ุงูุฏูุฑ ุจูุฌุงุญ"),C()):u.error(s.error||"ุฎุทุฃ ูู ุญุฐู ุงูุฏูุฑ")}else if(j.type==="user"){const s=await A.deleteUser(j.id);s.success?(u.success(s.message||"ุชู ุญุฐู ุงููุณุชุฎุฏู ุจูุฌุงุญ"),C()):u.error(s.error||"ุฎุทุฃ ูู ุญุฐู ุงููุณุชุฎุฏู")}}catch{u.error("ุฎุทุฃ ูู ุนูููุฉ ุงูุญุฐู")}finally{p(!1),E(null)}},z=s=>{switch(s){case"manager":return"bg-red-100 text-red-800 border-red-200";case"operations_supervisor":return"bg-blue-100 text-blue-800 border-blue-200";case"receptionist":return"bg-green-100 text-green-800 border-green-200";case"team_leader":return"bg-yellow-100 text-yellow-800 border-yellow-200";default:return"bg-gray-100 text-gray-800 border-gray-200"}},ae=s=>{if(s.admin)return"ุฌููุน ุงูุตูุงุญูุงุช";let w=0;return Object.values(s).forEach(P=>{typeof P=="object"&&P!==null&&Object.values(P).forEach(te=>{te===!0&&w++})}),`${w} ุตูุงุญูุฉ`};return b?e.jsx("div",{className:"flex items-center justify-center min-h-screen",children:e.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-blue-600"})}):e.jsxs("div",{className:"p-6 max-w-7xl mx-auto",children:[e.jsxs("div",{className:"mb-8",children:[e.jsxs("div",{className:"flex items-center gap-3 mb-4",children:[e.jsx(F,{className:"h-8 w-8 text-primary-600"}),e.jsx("h1",{className:"text-3xl font-bold bg-gradient-to-r from-primary-600 to-primary-800 bg-clip-text text-transparent",children:"ุฅุฏุงุฑุฉ ุงูุฃุฏูุงุฑ ูุงูุตูุงุญูุงุช"})]}),e.jsx("p",{className:"text-gray-600 mt-2",children:"ุฅุฏุงุฑุฉ ุฃุฏูุงุฑ ุงููุณุชุฎุฏููู ูุตูุงุญูุงุชูู ูู ุงููุธุงู"})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-4 gap-4 mb-8",children:[e.jsx("div",{className:"card-compact bg-gradient-to-br from-blue-50 to-blue-100 border-blue-200",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-sm font-medium text-blue-600",children:"ุฅุฌูุงูู ุงูุฃุฏูุงุฑ"}),e.jsx("p",{className:"text-2xl font-bold text-blue-800",children:a.length})]}),e.jsx("div",{className:"p-3 bg-blue-500 rounded-lg",children:e.jsx(F,{className:"h-6 w-6 text-white"})})]})}),e.jsx("div",{className:"card-compact bg-gradient-to-br from-green-50 to-green-100 border-green-200",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-sm font-medium text-green-600",children:"ุงูุฃุฏูุงุฑ ุงููุดุทุฉ"}),e.jsx("p",{className:"text-2xl font-bold text-green-800",children:a.filter(s=>s.is_active).length})]}),e.jsx("div",{className:"p-3 bg-green-500 rounded-lg",children:e.jsx(H,{className:"h-6 w-6 text-white"})})]})}),e.jsx("div",{className:"card-compact bg-gradient-to-br from-purple-50 to-purple-100 border-purple-200",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-sm font-medium text-purple-600",children:"ุฅุฌูุงูู ุงููุณุชุฎุฏููู"}),e.jsx("p",{className:"text-2xl font-bold text-purple-800",children:i.length})]}),e.jsx("div",{className:"p-3 bg-purple-500 rounded-lg",children:e.jsx(q,{className:"h-6 w-6 text-white"})})]})}),e.jsx("div",{className:"card-compact bg-gradient-to-br from-orange-50 to-orange-100 border-orange-200",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-sm font-medium text-orange-600",children:"ุงููุณุชุฎุฏููู ุงููุดุทูู"}),e.jsx("p",{className:"text-2xl font-bold text-orange-800",children:i.filter(s=>s.is_active).length})]}),e.jsx("div",{className:"p-3 bg-orange-500 rounded-lg",children:e.jsx(he,{className:"h-6 w-6 text-white"})})]})})]}),e.jsx("div",{className:"mb-6",children:e.jsx("div",{className:"card-compact",children:e.jsxs("nav",{className:"flex space-x-8",dir:"ltr",children:[e.jsx("button",{onClick:()=>l("roles"),className:`py-3 px-4 rounded-lg font-medium text-sm transition-all duration-200 ${g==="roles"?"bg-primary-100 text-primary-700 shadow-sm":"text-gray-500 hover:text-gray-700 hover:bg-gray-50"}`,children:e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(F,{className:"h-4 w-4"}),"ุงูุฃุฏูุงุฑ (",a.length,")"]})}),e.jsx("button",{onClick:()=>l("users"),className:`py-3 px-4 rounded-lg font-medium text-sm transition-all duration-200 ${g==="users"?"bg-primary-100 text-primary-700 shadow-sm":"text-gray-500 hover:text-gray-700 hover:bg-gray-50"}`,children:e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(q,{className:"h-4 w-4"}),"ุงููุณุชุฎุฏููู (",i.length,")"]})})]})})}),g==="roles"&&e.jsxs("div",{children:[e.jsx("div",{className:"mb-6 flex justify-between items-center",children:e.jsx("div",{className:"flex gap-3",children:e.jsxs("button",{onClick:W,className:"btn-primary hover:scale-105 transition-all duration-200 shadow-lg hover:shadow-xl",children:[e.jsx(I,{className:"h-4 w-4"}),"ุฅุถุงูุฉ ุฏูุฑ ุฌุฏูุฏ"]})})}),e.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6",children:a.map(s=>e.jsxs("div",{className:"card-elevated hover:shadow-xl transition-all duration-300 hover:scale-105",children:[e.jsxs("div",{className:"flex items-start justify-between mb-4",children:[e.jsxs("div",{children:[e.jsx("div",{className:`inline-flex items-center px-2.5 py-0.5 rounded-full text-xs font-medium border ${z(s.name)}`,children:s.name_ar}),e.jsx("h3",{className:"text-lg font-semibold text-gray-900 mt-2",children:s.name})]}),e.jsxs("div",{className:"flex gap-1",children:[e.jsx("button",{onClick:()=>J(s),className:"p-2 text-blue-600 hover:bg-blue-50 rounded-lg transition-all duration-200 hover:scale-110 shadow-sm hover:shadow-md",children:e.jsx(V,{className:"h-4 w-4"})}),e.jsx("button",{onClick:()=>K(s),className:"p-2 text-red-600 hover:bg-red-50 rounded-lg transition-all duration-200 hover:scale-110 shadow-sm hover:shadow-md",children:e.jsx(X,{className:"h-4 w-4"})})]})]}),s.description&&e.jsx("p",{className:"text-gray-600 text-sm mb-3",children:s.description}),e.jsxs("div",{className:"flex items-center justify-between text-sm",children:[e.jsx("span",{className:"text-gray-500",children:ae(s.permissions)}),e.jsx("span",{className:`px-2 py-1 rounded-full text-xs ${s.is_active?"bg-green-100 text-green-800":"bg-red-100 text-red-800"}`,children:s.is_active?"ูุดุท":"ุบูุฑ ูุดุท"})]}),e.jsxs("div",{className:"mt-4 text-xs text-gray-400",children:["ุงููุณุชุฎุฏููู: ",i.filter(w=>w.role_id===s.id).length]})]},s.id))})]}),g==="users"&&e.jsxs("div",{children:[e.jsx("div",{className:"mb-6 flex justify-between items-center",children:e.jsxs("button",{onClick:Q,className:"btn-primary hover:scale-105 transition-all duration-200 shadow-lg hover:shadow-xl",children:[e.jsx(I,{className:"h-4 w-4"}),"ุฅุถุงูุฉ ูุณุชุฎุฏู ุฌุฏูุฏ"]})}),e.jsx("div",{className:"card-elevated overflow-hidden",children:e.jsx("div",{className:"overflow-x-auto",children:e.jsxs("table",{className:"table",children:[e.jsx("thead",{className:"table-header",children:e.jsxs("tr",{children:[e.jsx("th",{className:"table-header-cell",children:"ุงููุณุชุฎุฏู"}),e.jsx("th",{className:"table-header-cell",children:"ุงูุฏูุฑ"}),e.jsx("th",{className:"table-header-cell",children:"ุงูุญุงูุฉ"}),e.jsx("th",{className:"table-header-cell",children:"ุชุงุฑูุฎ ุงูุฅูุดุงุก"}),e.jsx("th",{className:"table-header-cell",children:"ุงูุฅุฌุฑุงุกุงุช"})]})}),e.jsx("tbody",{className:"table-body",children:i.map(s=>e.jsxs("tr",{className:"table-row",children:[e.jsx("td",{className:"table-cell",children:e.jsxs("div",{children:[e.jsx("div",{className:"text-sm font-medium text-gray-900",children:s.full_name}),s.phone&&e.jsx("div",{className:"text-sm text-gray-500",children:s.phone})]})}),e.jsx("td",{className:"table-cell",children:s.role?e.jsx("span",{className:`inline-flex items-center px-2.5 py-0.5 rounded-full text-xs font-medium border ${z(s.role.name)}`,children:s.role.name_ar}):e.jsx("span",{className:"text-gray-400 text-sm",children:"ุจุฏูู ุฏูุฑ"})}),e.jsx("td",{className:"table-cell",children:e.jsx("span",{className:`inline-flex items-center px-2.5 py-0.5 rounded-full text-xs font-medium ${s.is_active?"bg-green-100 text-green-800":"bg-red-100 text-red-800"}`,children:s.is_active?"ูุดุท":"ุบูุฑ ูุดุท"})}),e.jsx("td",{className:"table-cell text-gray-500",children:new Date(s.created_at).toLocaleDateString("ar-AE")}),e.jsx("td",{className:"table-cell",children:e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("button",{onClick:()=>Z(s),className:"p-2 text-blue-600 hover:bg-blue-50 rounded-lg transition-all duration-200 hover:scale-110 shadow-sm hover:shadow-md",title:"ุชุบููุฑ ุงูุฏูุฑ",children:e.jsx(G,{className:"h-4 w-4"})}),e.jsx("button",{onClick:()=>Y(s),className:"p-2 text-green-600 hover:bg-green-50 rounded-lg transition-all duration-200 hover:scale-110 shadow-sm hover:shadow-md",title:"ุชุนุฏูู ุงููุณุชุฎุฏู",children:e.jsx(V,{className:"h-4 w-4"})}),e.jsx("button",{onClick:()=>ee(s),className:"p-2 text-red-600 hover:bg-red-50 rounded-lg transition-all duration-200 hover:scale-110 shadow-sm hover:shadow-md",title:"ุญุฐู ุงููุณุชุฎุฏู",children:e.jsx(X,{className:"h-4 w-4"})}),e.jsx("button",{onClick:()=>se(s),className:`p-2 rounded-lg transition-all duration-200 hover:scale-110 shadow-sm hover:shadow-md ${s.is_active?"text-red-600 hover:bg-red-50":"text-green-600 hover:bg-green-50"}`,title:s.is_active?"ุฅูุบุงุก ุงูุชูุนูู":"ุชูุนูู",children:s.is_active?e.jsx(xe,{className:"h-4 w-4"}):e.jsx(ne,{className:"h-4 w-4"})})]})})]},s.id))})]})})})]}),U&&e.jsx(ge,{role:N,onClose:()=>{t(!1),v(null)},onSuccess:()=>{t(!1),v(null),C()}}),_&&$&&e.jsx(be,{user:$,roles:a,onClose:()=>{d(!1),c(null)},onSuccess:()=>{d(!1),c(null),C()}}),k&&e.jsx(fe,{user:o,roles:a,onClose:()=>{r(!1),x(null)},onSuccess:()=>{r(!1),x(null),C()}}),n&&j&&e.jsx(pe,{isOpen:n,onClose:()=>{p(!1),E(null)},onConfirm:re,title:j.type==="role"?"ุญุฐู ุงูุฏูุฑ":"ุญุฐู ุงููุณุชุฎุฏู",message:`ูู ุฃูุช ูุชุฃูุฏ ูู ุญุฐู ${j.type==="role"?"ุงูุฏูุฑ":"ุงููุณุชุฎุฏู"} "${j.name}"ุ ูุฐุง ุงูุฅุฌุฑุงุก ูุง ูููู ุงูุชุฑุงุฌุน ุนูู.`})]})};export{$e as default};
